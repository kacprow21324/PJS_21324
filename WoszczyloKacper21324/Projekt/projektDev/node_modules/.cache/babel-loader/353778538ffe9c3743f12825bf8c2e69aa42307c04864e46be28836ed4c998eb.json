{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kacper\\\\Desktop\\\\PJS_projekt\\\\projekt_dev\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Login from './components/Login.js';\nimport NewPostForm from './components/NewPostForm.js';\nimport PostList from './components/PostList.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STORAGE_KEY = 'redditBlogData';\nexport default function App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [posts, setPosts] = useState(() => {\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      return saved ? JSON.parse(saved) : [];\n    } catch {\n      return [];\n    }\n  });\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(posts));\n  }, [posts]);\n  const addPost = ({\n    title,\n    text\n  }) => setPosts(p => [{\n    id: Date.now(),\n    user,\n    title,\n    text,\n    score: 0,\n    upvotes: [],\n    downvotes: [],\n    replies: []\n  }, ...p]);\n  const deletePost = postId => setPosts(p => p.filter(x => x.id !== postId));\n  const votePost = (postId, type) => setPosts(p => p.map(x => {\n    if (x.id !== postId) return x;\n    const up = (x.upvotes || []).filter(u => u !== user);\n    const down = (x.downvotes || []).filter(u => u !== user);\n    if (type === 'up') up.push(user);\n    if (type === 'down') down.push(user);\n    return {\n      ...x,\n      upvotes: up,\n      downvotes: down,\n      score: up.length - down.length\n    };\n  }));\n  const voteReply = (postId, rid, type) => setPosts(p => p.map(x => {\n    if (x.id !== postId) return x;\n    const updated = x.replies.map(r => {\n      if (r.id !== rid) return r;\n      const up = (r.upvotes || []).filter(u => u !== user);\n      const down = (r.downvotes || []).filter(u => u !== user);\n      if (type === 'up') up.push(user);\n      if (type === 'down') down.push(user);\n      return {\n        ...r,\n        upvotes: up,\n        downvotes: down,\n        score: up.length - down.length\n      };\n    });\n    return {\n      ...x,\n      replies: updated\n    };\n  }));\n  const addReply = (postId, parentId, text) => setPosts(p => p.map(x => {\n    if (x.id !== postId) return x;\n    const newR = {\n      id: Date.now(),\n      user,\n      text,\n      parentId,\n      upvotes: [],\n      downvotes: [],\n      score: 0\n    };\n    return {\n      ...x,\n      replies: [...x.replies, newR]\n    };\n  }));\n  const logout = () => setUser(null);\n  if (!user) return /*#__PURE__*/_jsxDEV(Login, {\n    onLogin: setUser\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 20\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Witaj, \", user]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: logout,\n        children: \"Wyloguj\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewPostForm, {\n      onPost: addPost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PostList, {\n      posts: posts,\n      user: user,\n      onVote: votePost,\n      onVoteReply: voteReply,\n      onReply: addReply,\n      onDelete: deletePost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Nw1Z4RBfKZ436glB1CbRoWpqCyw=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Login","NewPostForm","PostList","jsxDEV","_jsxDEV","STORAGE_KEY","App","_s","user","setUser","posts","setPosts","saved","localStorage","getItem","JSON","parse","setItem","stringify","addPost","title","text","p","id","Date","now","score","upvotes","downvotes","replies","deletePost","postId","filter","x","votePost","type","map","up","u","down","push","length","voteReply","rid","updated","r","addReply","parentId","newR","logout","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","onPost","onVote","onVoteReply","onReply","onDelete","_c","$RefreshReg$"],"sources":["C:/Users/Kacper/Desktop/PJS_projekt/projekt_dev/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport Login       from './components/Login.js';\r\nimport NewPostForm from './components/NewPostForm.js';\r\nimport PostList    from './components/PostList.js';\r\n\r\nconst STORAGE_KEY = 'redditBlogData';\r\nexport default function App() {\r\n  const [user, setUser] = useState(null);\r\n  const [posts, setPosts] = useState(()=>{\r\n    try { const saved=localStorage.getItem(STORAGE_KEY); return saved?JSON.parse(saved):[];}catch{return [];}\r\n  });\r\n  useEffect(()=>{localStorage.setItem(STORAGE_KEY,JSON.stringify(posts));},[posts]);\r\n\r\n  const addPost    = ({title,text})=> setPosts(p=>[{id:Date.now(),user,title,text,score:0,upvotes:[],downvotes:[],replies:[]} ,...p]);\r\n  const deletePost = postId  => setPosts(p=>p.filter(x=>x.id!==postId));\r\n  const votePost   = (postId,type)=> setPosts(p=>p.map(x=>{\r\n    if(x.id!==postId)return x;\r\n    const up=(x.upvotes||[]).filter(u=>u!==user);\r\n    const down=(x.downvotes||[]).filter(u=>u!==user);\r\n    if(type==='up')up.push(user);\r\n    if(type==='down')down.push(user);\r\n    return {...x,upvotes:up,downvotes:down,score:up.length-down.length};\r\n  }));\r\n  const voteReply=(postId,rid,type)=>setPosts(p=>p.map(x=>{\r\n    if(x.id!==postId)return x;\r\n    const updated=x.replies.map(r=>{\r\n      if(r.id!==rid)return r;\r\n      const up=(r.upvotes||[]).filter(u=>u!==user);\r\n      const down=(r.downvotes||[]).filter(u=>u!==user);\r\n      if(type==='up')up.push(user);\r\n      if(type==='down')down.push(user);\r\n      return {...r,upvotes:up,downvotes:down,score:up.length-down.length};\r\n    });\r\n    return {...x,replies:updated};\r\n  }));\r\n  const addReply  = (postId,parentId,text)=>setPosts(p=>p.map(x=>{\r\n    if(x.id!==postId)return x;\r\n    const newR={id:Date.now(),user,text,parentId,upvotes:[],downvotes:[],score:0};\r\n    return {...x,replies:[...x.replies,newR]};\r\n  }));\r\n  const logout    = ()=>setUser(null);\r\n\r\n  if(!user) return <Login onLogin={setUser}/>;\r\n  return (\r\n    <div className=\"container\">\r\n      <header>\r\n        <h1>Witaj, {user}</h1>\r\n        <button className=\"btn\" onClick={logout}>Wyloguj</button>\r\n      </header>\r\n      <NewPostForm onPost={addPost}/>\r\n      <PostList\r\n        posts={posts}\r\n        user={user}\r\n        onVote={votePost}\r\n        onVoteReply={voteReply}\r\n        onReply={addReply}\r\n        onDelete={deletePost}\r\n      />\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}