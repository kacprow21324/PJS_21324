{"ast":null,"code":"import _objectSpread from\"C:/Users/Kacper/Desktop/PJS_projekt/projekt_dev/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./App.css';import Login from'./components/Login.js';import NewPostForm from'./components/NewPostForm.js';import PostList from'./components/PostList.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const STORAGE_KEY='redditBlogData';export default function App(){const[user,setUser]=useState(null);const[posts,setPosts]=useState(()=>{try{const saved=localStorage.getItem(STORAGE_KEY);return saved?JSON.parse(saved):[];}catch(_unused){return[];}});useEffect(()=>{localStorage.setItem(STORAGE_KEY,JSON.stringify(posts));},[posts]);const addPost=_ref=>{let{title,text}=_ref;const newPost={id:Date.now(),user,title,text,score:0,upvotes:[],downvotes:[],replies:[]};setPosts(prev=>[newPost,...prev]);};const deletePost=postId=>{setPosts(prev=>prev.filter(p=>p.id!==postId));};const votePost=(postId,type)=>{setPosts(prev=>prev.map(p=>{if(p.id!==postId)return p;const up=(p.upvotes||[]).filter(u=>u!==user);const down=(p.downvotes||[]).filter(u=>u!==user);if(type==='up')up.push(user);if(type==='down')down.push(user);return _objectSpread(_objectSpread({},p),{},{upvotes:up,downvotes:down,score:up.length-down.length});}));};const voteReply=(postId,replyId,type)=>{setPosts(prev=>prev.map(p=>{if(p.id!==postId)return p;const replies=p.replies.map(r=>{if(r.id!==replyId)return r;const up=(r.upvotes||[]).filter(u=>u!==user);const down=(r.downvotes||[]).filter(u=>u!==user);if(type==='up')up.push(user);if(type==='down')down.push(user);return _objectSpread(_objectSpread({},r),{},{upvotes:up,downvotes:down,score:up.length-down.length});});return _objectSpread(_objectSpread({},p),{},{replies});}));};const addReply=(postId,parentId,text)=>{setPosts(prev=>prev.map(p=>{if(p.id!==postId)return p;const reply={id:Date.now(),user,text,parentId,upvotes:[],downvotes:[],score:0};return _objectSpread(_objectSpread({},p),{},{replies:[...p.replies,reply]});}));};const logout=()=>setUser(null);if(!user)return/*#__PURE__*/_jsx(Login,{onLogin:setUser});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Witaj, \",user]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:logout,children:\"Wyloguj\"})]}),/*#__PURE__*/_jsx(NewPostForm,{onPost:addPost}),/*#__PURE__*/_jsx(PostList,{posts:posts,user:user,onVote:votePost,onVoteReply:voteReply,onReply:addReply,onDelete:deletePost})]});}","map":{"version":3,"names":["React","useState","useEffect","Login","NewPostForm","PostList","jsx","_jsx","jsxs","_jsxs","STORAGE_KEY","App","user","setUser","posts","setPosts","saved","localStorage","getItem","JSON","parse","_unused","setItem","stringify","addPost","_ref","title","text","newPost","id","Date","now","score","upvotes","downvotes","replies","prev","deletePost","postId","filter","p","votePost","type","map","up","u","down","push","_objectSpread","length","voteReply","replyId","r","addReply","parentId","reply","logout","onLogin","className","children","onClick","onPost","onVote","onVoteReply","onReply","onDelete"],"sources":["C:/Users/Kacper/Desktop/PJS_projekt/projekt_dev/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport Login       from './components/Login.js';\r\nimport NewPostForm from './components/NewPostForm.js';\r\nimport PostList    from './components/PostList.js';\r\n\r\nconst STORAGE_KEY = 'redditBlogData';\r\n\r\nexport default function App() {\r\n  const [user, setUser] = useState(null);\r\n  const [posts, setPosts] = useState(() => {\r\n    try { const saved = localStorage.getItem(STORAGE_KEY); return saved ? JSON.parse(saved) : []; }\r\n    catch { return []; }\r\n  });\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(posts));\r\n  }, [posts]);\r\n\r\n  const addPost = ({ title, text }) => {\r\n    const newPost = {\r\n      id: Date.now(),\r\n      user,\r\n      title,\r\n      text,\r\n      score: 0,\r\n      upvotes: [],\r\n      downvotes: [],\r\n      replies: []\r\n    };\r\n    setPosts(prev => [newPost, ...prev]);\r\n  };\r\n\r\n  const deletePost = postId => {\r\n    setPosts(prev => prev.filter(p => p.id !== postId));\r\n  };\r\n\r\n  const votePost = (postId, type) => {\r\n    setPosts(prev => prev.map(p => {\r\n      if (p.id !== postId) return p;\r\n      const up   = (p.upvotes || []).filter(u => u !== user);\r\n      const down = (p.downvotes || []).filter(u => u !== user);\r\n      if (type === 'up')   up.push(user);\r\n      if (type === 'down') down.push(user);\r\n      return { ...p, upvotes: up, downvotes: down, score: up.length - down.length };\r\n    }));\r\n  };\r\n\r\n  const voteReply = (postId, replyId, type) => {\r\n    setPosts(prev => prev.map(p => {\r\n      if (p.id !== postId) return p;\r\n      const replies = p.replies.map(r => {\r\n        if (r.id !== replyId) return r;\r\n        const up   = (r.upvotes || []).filter(u => u !== user);\r\n        const down = (r.downvotes || []).filter(u => u !== user);\r\n        if (type === 'up')   up.push(user);\r\n        if (type === 'down') down.push(user);\r\n        return { ...r, upvotes: up, downvotes: down, score: up.length - down.length };\r\n      });\r\n      return { ...p, replies };\r\n    }));\r\n  };\r\n\r\n  const addReply = (postId, parentId, text) => {\r\n    setPosts(prev => prev.map(p => {\r\n      if (p.id !== postId) return p;\r\n      const reply = {\r\n        id: Date.now(),\r\n        user,\r\n        text,\r\n        parentId,\r\n        upvotes: [],\r\n        downvotes: [],\r\n        score: 0\r\n      };\r\n      return { ...p, replies: [...p.replies, reply] };\r\n    }));\r\n  };\r\n\r\n  const logout = () => setUser(null);\r\n\r\n  if (!user) return <Login onLogin={setUser} />;\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <header>\r\n        <h1>Witaj, {user}</h1>\r\n        <button className=\"btn\" onClick={logout}>Wyloguj</button>\r\n      </header>\r\n\r\n      <NewPostForm onPost={addPost} />\r\n\r\n      <PostList\r\n        posts={posts}\r\n        user={user}\r\n        onVote={votePost}\r\n        onVoteReply={voteReply}\r\n        onReply={addReply}\r\n        onDelete={deletePost}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}