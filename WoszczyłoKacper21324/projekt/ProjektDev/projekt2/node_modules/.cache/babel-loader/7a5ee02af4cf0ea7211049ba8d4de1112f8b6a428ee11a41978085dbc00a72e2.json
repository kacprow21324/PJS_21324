{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kacper\\\\Desktop\\\\React\\\\ProjektDev\\\\projekt\\\\src\\\\components\\\\PostList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport PostThread from './PostThread.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostList({\n  posts,\n  user\n}) {\n  _s();\n  const [localPosts, setLocalPosts] = useState(posts);\n  const [openThread, setOpenThread] = useState(null);\n  useEffect(() => setLocalPosts(posts), [posts]);\n  const vote = (postId, vote) => {\n    fetch('/vote', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        postId,\n        user,\n        vote\n      })\n    }).then(() => {\n      setLocalPosts(prev => prev.map(p => p.id === postId ? {\n        ...p,\n        score: (Number(p.score) || 0) + vote\n      } : p));\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: localPosts.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #ddd',\n        padding: '0.5rem',\n        marginBottom: '0.5rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          cursor: 'pointer',\n          margin: 0\n        },\n        onClick: () => setOpenThread(openThread === p.id ? null : p.id),\n        children: [p.title, \" (\\u26A1 \", p.score || 0, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: p.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => vote(p.id, +1),\n        children: \"Upvote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => vote(p.id, -1),\n        children: \"Downvote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 11\n      }, this), openThread === p.id && /*#__PURE__*/_jsxDEV(PostThread, {\n        post: p,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }, this)]\n    }, p.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_s(PostList, \"+c6PGmzXi+8+FJ0exq3QKU79wuo=\");\n_c = PostList;\nvar _c;\n$RefreshReg$(_c, \"PostList\");","map":{"version":3,"names":["useState","useEffect","PostThread","jsxDEV","_jsxDEV","PostList","posts","user","_s","localPosts","setLocalPosts","openThread","setOpenThread","vote","postId","fetch","method","headers","body","JSON","stringify","then","prev","map","p","id","score","Number","children","style","border","padding","marginBottom","cursor","margin","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","text","post","_c","$RefreshReg$"],"sources":["C:/Users/Kacper/Desktop/React/ProjektDev/projekt/src/components/PostList.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport PostThread from './PostThread.js';\r\n\r\nexport default function PostList({ posts, user }) {\r\n  const [localPosts, setLocalPosts] = useState(posts);\r\n  const [openThread, setOpenThread] = useState(null);\r\n\r\n  useEffect(() => setLocalPosts(posts), [posts]);\r\n\r\n  const vote = (postId, vote) => {\r\n    fetch('/vote', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ postId, user, vote })\r\n    })\r\n    .then(() => {\r\n      setLocalPosts(prev =>\r\n        prev.map(p =>\r\n          p.id === postId\r\n            ? { ...p, score: (Number(p.score)||0) + vote }\r\n            : p\r\n        )\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {localPosts.map(p => (\r\n        <div key={p.id} style={{ border: '1px solid #ddd', padding: '0.5rem', marginBottom: '0.5rem' }}>\r\n          <h3\r\n            style={{ cursor: 'pointer', margin: 0 }}\r\n            onClick={() => setOpenThread(openThread===p.id ? null : p.id)}\r\n          >\r\n            {p.title} (âš¡ {p.score||0})\r\n          </h3>\r\n          <p>{p.text}</p>\r\n          <button onClick={() => vote(p.id, +1)}>Upvote</button>\r\n          <button onClick={() => vote(p.id, -1)}>Downvote</button>\r\n\r\n          {openThread === p.id && (\r\n            <PostThread post={p} user={user} />\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}